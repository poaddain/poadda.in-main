<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<title>Student Dashboard</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
:root{
  --glass-border: rgba(255,255,255,0.55);
  --header-green:#0b5d1e;
}

*{box-sizing:border-box;-webkit-tap-highlight-color:transparent}

body{
  margin:0;
  font-family:Poppins,sans-serif;
  min-height:100vh;
  background: linear-gradient(-45deg,#6a11cb,#2575fc,#ff7e5f,#feb47b);
  background-size:400% 400%;
  animation:gradientBG 12s ease infinite;
}

@keyframes gradientBG{
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}

/* ================= DESKTOP (UNCHANGED) ================= */
.dashboard{display:flex;height:100vh}

.profile-panel{
  width:25%;
  min-width:300px;
  padding:30px 20px;
  color:#fff;
  text-align:center;
  border-right:1px solid var(--glass-border);
  position:relative;
}

.poadda-logo{width:90px;margin-bottom:15px}

.logout-btn{
  position:absolute;
  bottom:25px;
  left:50%;
  transform:translateX(-50%);
  background:rgba(255,255,255,.25);
  border:1px solid rgba(255,255,255,.5);
  padding:10px 18px;
  border-radius:14px;
  color:#fff;
  font-weight:600;
  cursor:pointer;
}

/* RIGHT PANEL */
.content-panel{
  flex:1;
  display:flex;
  flex-direction:column;
  background:linear-gradient(0deg, rgba(255,255,255,.72), rgba(255,255,255,.92));
  overflow-y:auto;
}

.right-header{
  background:var(--header-green);
  padding:35px 50px;
  font-size:1.5rem;
  font-weight:700;
  color:#fff;
  position:sticky;
  top:0;
  z-index:10;
  transition:transform .35s ease;
}

.right-header.hide{transform:translateY(-100%)}

/* CARDS */
.cards{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
  gap:25px;
  max-width:700px;
  margin:30px auto;
}

.card{
  background:rgba(255,255,255,.85);
  border-radius:20px;
  padding:32px 30px;
  font-size:1.15rem;
  font-weight:700;
  cursor:pointer;
  box-shadow:0 8px 20px rgba(0,0,0,.15);
  transition:.35s cubic-bezier(.25,.8,.25,1);
}

.card:hover{transform:translateY(-8px)}
.card:active{transform:scale(.96)}

.card.active{
  background:linear-gradient(135deg,#ffe082,#ffd54f);
}

.section-divider{
  width:90%;
  height:2px;
  margin:auto;
  background:linear-gradient(to right,transparent,#000,transparent);
}

/* PRACTICE */
.white-section{display:none;animation:slideUp .45s ease}
@keyframes slideUp{
  from{opacity:0;transform:translateY(30px)}
  to{opacity:1;transform:none}
}

.practice-area{display:flex;padding:30px;gap:20px}
.practice-left,.practice-right{width:50%}

/* ================= MOBILE FIX ================= */
@media(max-width:768px){

.dashboard{
  flex-direction:column;
  height:auto;
}

.profile-panel{
  width:100%;
  min-width:0;
  border-right:none;
  border-bottom:1px solid var(--glass-border);
}

.logout-btn{
  position:static;
  transform:none;
  margin-top:12px;
  width:100%;
}

.cards{
  grid-template-columns:1fr;
  margin:15px;
}

.practice-area{
  flex-direction:column;
}

.practice-left,.practice-right{width:100%}

.content-panel{padding-bottom:75px}

/* iOS bottom nav */
.bottom-nav{
  position:fixed;
  bottom:0;
  left:0;
  right:0;
  height:65px;
  background:rgba(255,255,255,.95);
  backdrop-filter:blur(20px);
  display:flex;
  justify-content:space-around;
  align-items:center;
  border-top:1px solid #ccc;
  z-index:100;
}

.bottom-nav button{
  background:none;
  border:none;
  font-size:.8rem;
  font-weight:600;
  color:#555;
}

.bottom-nav button.active{color:#0b5d1e}
}
</style>
</head>

<body>

<div class="dashboard">

  <div class="profile-panel">
    <img src="logo.png" class="poadda-logo">
    <h2 id="welcomeMsg">Welcome</h2>
    <button class="logout-btn" onclick="logout()">Logout</button>
  </div>

  <div class="content-panel">

    <div class="right-header" id="rightWelcome">Welcome</div>

    <div class="cards">
      <div class="card" onclick="setActiveCard(0); goToPage('iposyllabus.html')">Syllabus</div>
      <div class="card" onclick="setActiveCard(1); goToPage('iposm.html')">Study Material</div>
      <div class="card" onclick="setActiveCard(2); loadPracticeSets()">Practice Sets</div>
    </div>

    <div class="section-divider"></div>

    <div class="white-section">
      <div class="practice-area">
        <div class="practice-left">
          <div class="glass-box" id="box1">
            <h3 id="box1Heading">Your Enrolled Courses</h3>
            <div class="loader" id="loader">
              <img src="https://i.imgur.com/llF5iyg.png">
            </div>
          </div>
          <div class="glass-box" id="box2">
            <h3>Waiting for you</h3>
          </div>
        </div>

        <div class="practice-right" id="box3" style="display:none">
          <div class="glass-box">
            <h3>Pro Member</h3>
            <div class="glass-item" onclick="goToPage('ipop1.html')">Paper 1</div>
            <div class="glass-item" onclick="goToPage('ipop2.html')">Paper 2</div>
            <div class="glass-item" onclick="goToPage('ipop3.html')">Paper 3</div>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>

<!-- MOBILE NAV (USES SAME LOGIC) -->
<div class="bottom-nav">
  <button onclick="setActiveCard(0); goToPage('iposyllabus.html')">üìò<br>Syllabus</button>
  <button onclick="setActiveCard(1); goToPage('iposm.html')">üìÑ<br>Study</button>
  <button onclick="setActiveCard(2); loadPracticeSets()">‚úçÔ∏è<br>Practice</button>
</div>

<script>
/* ================= ORIGINAL LOGIC (UNCHANGED) ================= */
const API_URL="https://script.google.com/macros/s/AKfycbyo-QfW63UR5-nWaB_CQsIQGqNr7gP4GTOe3RMpx0lLjdaYoQB9fbFAiQwpjX4-sf2B0w/exec";

function setActiveCard(index){
  document.querySelectorAll(".card").forEach(c=>c.classList.remove("active"));
  document.querySelectorAll(".card")[index].classList.add("active");
}

function goToPage(p){ location.href=p }

function logout(){
  if(confirm("Are you sure for Exit now?")){
    localStorage.clear();
    location.href="login.html";
  }
}

async function loadPracticeSets(){
  setActiveCard(2);
  document.querySelector(".white-section").style.display="block";
  document.getElementById("box1Heading").innerText="Your enrolled courses";

  const res=await fetch(API_URL+"?mobile="+localStorage.getItem("mobile"));
  const data=await res.json();
  document.getElementById("loader")?.remove();

  [data.C,data.D,data.E].forEach(v=>{
    if(v){
      const d=document.createElement("div");
      d.className="glass-item";
      d.innerText=v;
      d.onclick=()=>box3.style.display=v.toLowerCase().includes("pro")?"block":"none";
      box1.appendChild(d);
    }
  });

  [data.I,data.J].forEach(v=>{
    if(v){
      const d=document.createElement("div");
      d.className="glass-item";
      d.innerText=v;
      d.onclick=()=>box3.style.display="none";
      box2.appendChild(d);
    }
  });
}

/* ‚úÖ STUDENT NAME FETCH (RESTORED) */
window.onload=async()=>{
  const res=await fetch(API_URL+"?mobile="+localStorage.getItem("mobile"));
  const data=await res.json();
  const name=data.name||"Student";
  welcomeMsg.innerText="Welcome, "+name;
  rightWelcome.innerText=welcomeMsg.innerText;
};
</script>

</body>
</html>
