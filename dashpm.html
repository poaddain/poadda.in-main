<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Student Dashboard</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
:root{
  --glass-bg: rgba(255,255,255,0.25);
  --glass-border: rgba(255,255,255,0.55);
  --accent: #ffd369;
  --header-green: #0b5d1e;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:Poppins,sans-serif;
  min-height:100vh;
  background: linear-gradient(-45deg,#6a11cb,#2575fc,#ff7e5f,#feb47b);
  background-size:400% 400%;
  animation:gradientBG 12s ease infinite;
}

@keyframes gradientBG{
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}

.dashboard{display:flex;height:100vh}

/* LEFT PANEL */
.profile-panel{
  width:25%;
  min-width:300px;
  padding:30px 20px;
  color:#fff;
  text-align:center;
  border-right:1px solid var(--glass-border);
  position:relative;
}

.logout-btn{
  position:absolute;
  bottom:25px;
  left:50%;
  transform:translateX(-50%);
  background:rgba(255,255,255,.25);
  border:1px solid rgba(255,255,255,.5);
  padding:10px 18px;
  border-radius:14px;
  color:#fff;
  font-weight:600;
  cursor:pointer;
  transition:.3s;
}
.logout-btn:hover{
  background:rgba(255,255,255,.45);
  transform:translateX(-50%) translateY(-2px);
}

/* RIGHT PANEL */
.content-panel{
  flex:1;
  display:flex;
  flex-direction:column;
  background:linear-gradient(0deg, rgba(255,255,255,.72), rgba(255,255,255,.92));
}

.right-header{
  background:var(--header-green);
  padding:35px 50px;
  font-size:1.5rem;
  font-weight:700;
  color:#fff;
}

/* TOP CARDS */
.cards{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
  gap:25px;
  max-width:700px;
  margin:30px auto;
}

.card{
  background: rgba(255,255,255,0.75);
  border:2px solid rgba(0,0,0,.15);
  border-radius:20px;
  padding:32px 30px;
  cursor:pointer;
  font-size:1.15rem;
  font-weight:700;
  box-shadow:0 8px 20px rgba(0,0,0,.15);
  transition:.35s ease;
}

.card:hover{
  transform:translateY(-8px);
  box-shadow:0 14px 35px rgba(0,0,0,.25);
}

/* ACTIVE CARD */
.card.active{
  background: linear-gradient(135deg,#ffe082,#ffd54f);
  border:2px solid #ffb300;
  box-shadow:0 10px 28px rgba(0,0,0,.25);
  transform:translateY(-4px);
}

/* DIVIDER */
.section-divider{
  width:90%;
  height:2px;
  margin:auto;
  background:linear-gradient(to right,transparent,#000,transparent);
}

.white-section{display:none;background:#fff}

.practice-area{display:flex;padding:30px;gap:20px}
.practice-left,.practice-right{width:50%}

.glass-box{
  background: rgba(255,255,255,.65);
  backdrop-filter: blur(14px);
  border:3px solid rgba(150,0,0,.18);
  border-radius:18px;
  padding:20px;
  margin-bottom:20px;
}

.glass-item{
  padding:14px;
  margin:12px 0;
  border-radius:14px;
  font-weight:600;
  cursor:pointer;
  transition:.35s ease;
  background:linear-gradient(135deg,#ffffff,#f3f3f3);
}

#box1 .glass-item{
  background:linear-gradient(135deg,#e3f2fd,#bbdefb);
  border-left:5px solid #2196f3;
}

#box2 .glass-item{
  background:linear-gradient(135deg,#e8f5e9,#c8e6c9);
  border-left:5px solid #43a047;
}

#box3 .glass-item{
  background:linear-gradient(135deg,#fff3cd,#e0c3fc);
  border-left:5px solid #ff9800;
}

.glass-item:hover{
  transform:translateY(-4px) scale(1.02);
  box-shadow:0 12px 26px rgba(0,0,0,.18);
}

.loader{text-align:center;padding:40px}
.loader img{width:60px;animation:spin 1s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}

.poadda-logo{width:90px;margin:0 auto 18px;display:block}
</style>
</head>

<body>

<div class="dashboard">

  <div class="profile-panel">
    <img src="logo.png" class="poadda-logo">
    <h2 id="welcomeMsg">Welcome</h2>
    <button class="logout-btn" onclick="logout()">Logout</button>
  </div>

  <div class="content-panel">

    <div class="right-header" id="rightWelcome">Welcome</div>

    <div class="cards">
      <div class="card" onclick="setActiveCard(0); goToPage('iposyllabus.html')">Syllabus</div>
      <div class="card" onclick="setActiveCard(1); goToPage('iposm.html')">Study Material</div>
      <div class="card" onclick="setActiveCard(2); loadPracticeSets()">Practice Sets</div>
    </div>

    <div class="section-divider"></div>

    <div class="white-section">
      <div class="practice-area">

        <div class="practice-left">
          <div class="glass-box" id="box1">
            <h3 id="box1Heading">Your Enrolled Courses</h3>
            <div class="loader" id="loader">
              <img src="https://i.imgur.com/llF5iyg.png">
            </div>
          </div>

          <div class="glass-box" id="box2">
            <h3>Waiting for you</h3>
          </div>
        </div>

        <div class="practice-right" id="box3" style="display:none">
          <div class="glass-box">
            <h3>Pro Member</h3>
            <div class="glass-item" onclick="goToPage('ipop1.html')">Paper 1</div>
            <div class="glass-item" onclick="goToPage('ipop2.html')">Paper 2</div>
            <div class="glass-item" onclick="goToPage('ipop3.html')">Paper 3</div>
          </div>
        </div>

      </div>
    </div>

  </div>
</div>

<script>
const API_URL="https://script.google.com/macros/s/AKfycbyo-QfW63UR5-nWaB_CQsIQGqNr7gP4GTOe3RMpx0lLjdaYoQB9fbFAiQwpjX4-sf2B0w/exec";

function setActiveCard(index){
  document.querySelectorAll(".card").forEach(c=>c.classList.remove("active"));
  document.querySelectorAll(".card")[index].classList.add("active");
}

function goToPage(p){location.href=p}

function logout(){
  if(confirm("Are you sure for Exit now?")){
    localStorage.clear();
    location.href="login.html";
  }
}

async function loadPracticeSets(){
  setActiveCard(2);
  document.querySelector(".white-section").style.display="block";
  document.getElementById("box1Heading").innerText="Your enrolled courses";

  const res=await fetch(API_URL+"?mobile="+localStorage.getItem("mobile"));
  const data=await res.json();
  document.getElementById("loader").remove();

  [data.C,data.D,data.E].forEach(v=>{
    if(v){
      const d=document.createElement("div");
      d.className="glass-item";
      d.innerText=v;
      d.onclick=()=>box3.style.display=v.toLowerCase().includes("pro")?"block":"none";
      box1.appendChild(d);
    }
  });

  [data.I,data.J].forEach(v=>{
    if(v){
      const d=document.createElement("div");
      d.className="glass-item";
      d.innerText=v;
      d.onclick=()=>box3.style.display="none";
      box2.appendChild(d);
    }
  });
}

window.onload=async()=>{
  const res=await fetch(API_URL+"?mobile="+localStorage.getItem("mobile"));
  const data=await res.json();
  const name=data.name||"Student";
  welcomeMsg.innerText="Welcome, "+name;
  rightWelcome.innerText=welcomeMsg.innerText;
};
</script>

</body>
</html>
